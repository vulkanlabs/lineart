<html>

<head>
    <title>Page</title>
</head>

<body>
    <h1>Page</h1>
    <p>This is a page.</p>
    <form id="userinfo">
        <div>
            <label for="username">Enter your name:</label>
            <input type="text" id="username" name="username" />
        </div>

        <div>
            <label for="user_email">Enter your email:</label>
            <input type="email" id="user_email" name="user_email" />
        </div>
        <input type="submit" value="Submit" />
    </form>

</body>
<script>
    const form = document.querySelector("#userinfo");

    async function sendData() {
        // Associate the FormData object with the form element
        const formData = new FormData(form);

        try {
            const response = await fetch("http://127.0.0.1:5000/test", {
                method: "POST",
                // Set the FormData instance as the request body
                body: formData,
                mode: 'cors',
            });
            console.log(await response.json());
        } catch (e) {
            console.error(e);
        }
    }

    // Take over form submission
    form.addEventListener("submit", (event) => {
        event.preventDefault();
        sendData();
    });

</script>

</html>